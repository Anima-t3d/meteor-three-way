<head>
	<title>ThreeWay Demo</title>
</head>
<body>
	<div class="ui container">
		{{> DemoThreeWay}}
	</div>
</body>

<template name="DemoThreeWay">
	<h1>ThreeWay Demo</h1>
	
	<div class="column">
		<h3>Debug Messages</h3>
		<div class="ui form">
			{{#each clump allDebugMessages 4}}
				<div class="fields">
					{{#each this}}
						<div class="four wide field">
							<div class="ui checkbox">
								<input type="checkbox" value="{{this}}" data-bind="checked: debugMessages" name="debug-messages">
								<label><code>{{this}}</code></label>
							</div>
							
						</div>
					{{/each}}
				</div>
			{{/each}}
		</div>
	</div>
	
	<div class="column">
		&nbsp;
	</div>
	
	<div class="column">
		<h3>Show Me the Data</h3>
		<table class="ui celled table">
			<thead>
				<tr>
					<th>Name</th>
					<th>e-mail Preferences</th>
					<th>Age</th>
					<th>Notes</th>
					<th>Tags</th>
					<th>Some Array</th>
					<th style="width: 150px;">Other Array</th>
					<th><button class="talk" data-bind="disabled: _3w_haveData|not">Disabled without Data</button></th>
				</tr>
			</thead>
			<tbody>
				{{#each data}}
					<tr>
						<td>{{name}}</td>
						<td>{{emailPrefsToCSL emailPrefs}}</td>
						<td>{{getProperty personal.particulars.age ageRanges}}</td>
						<td>{{notes}}</td>
						<td>{{join tags ', '}}</td>
						<td>
							<ol start="0">
								{{#each personal.someArr}}
									<li>{{this}}</li>
								{{/each}}
							</ol>
						</td>
						<td>
							<ol start="0">
								{{#each personal.otherArr}}
									<li>a: {{a}}; b: {{b}}</li>
								{{/each}}
							</ol>
						</td>
						<td>
							<button class="select-data" id="focus-{{_id}}">Edit</button>
						</td>
					</tr>
				{{/each}}
			</tbody>
		</table>
	</div>
	
	<div class="column">
		&nbsp;
	</div>
	
	<div data-bind="visible: _3w_haveData">
		
		<div class="column">
			<h3>Edit{{#if _3w_id}} - {{_3w_id}}{{/if}}</h3>
			
			<p>
				Requires <a href="https://atmospherejs.com/semantic/ui" target=_blank><code>semantic:ui</code></a> for the multi-select dropdown. (Start Meteor, do a trivial edit of <code>client/lib/semantic-ui/custom.semantic.json</code>, and save it to generate <a href="semantic-ui.com" target=_blank>Semantic UI</a>.)
			</p>
			
			<table border="1">
				<tr>
					<td><strong>Name</strong></td>
					<td><input name="name" style="border: 0; width: 100%;" data-bind="value: name"></td>
				</tr>
				<tr>
					<td><strong>e-mail Preferences</strong></td>
					<td>
						{{#each repackageDictionaryAsArray emailPrefsAll}}
							<div class="ui checkbox">
								<input type="checkbox" name="emailPrefs" value="{{key}}" data-bind="checked: emailPrefs">
								<label>{{value}}</label>
							</div>
						{{/each}}
					</td>
				</tr>
				<tr>
					<td><strong>Age</strong></td>
					<td>
						<div class="inline fields">
							{{#each repackageDictionaryAsArray ageRanges}}
								<div class="ui radio checkbox">
									<input type="radio" name="age" value="{{key}}" data-bind="checked: personal.particulars.age">
									<label>{{value}}</label>
								</div>
							{{/each}}
						</div>
					</td>
				</tr>
				<tr>
					<td><strong>Notes</strong></td>
					<td>
						<textarea data-bind="value: notes" style="border: 0; width: 100%;"></textarea>
					</td>
				</tr>
				<tr>
					<td><strong>Tags</strong></td>
					<td>
						<div class="ui fluid multiple search selection dropdown">
							<input name="tags" type="hidden" data-bind="value: tags|updateSemanticUIDropdown">
							<i class="dropdown icon"></i>
							<div class="default text">Select Tags</div>
							<div class="menu">
								{{#each allTags}}
									<div class="item" data-value="{{this}}">{{this}}</div>
								{{/each}}
							</div>
						</div>
					</td>
				</tr>
				<tr>
					<td><strong>personal.someArr</strong></td>
					<td>
						{{#each range num}}
							<strong>#{{this}}:</strong> <input name="personal.someArr.{{this}}" style="width: 25%;" data-bind="value: personal.someArr.{{this}}">
						{{/each}}
					</td>
				</tr>
				<tr>
					<td><strong>personal.otherArr[0]</strong></td>
					<td>
						<strong>a</strong>: <input style="width: 25%;" data-bind="value: personal.otherArr.0.a">
						<strong>b</strong>: <input style="width: 25%;" data-bind="value: personal.otherArr.0.b">
					</td>
				</tr>
				<tr>
					<td><strong>personal.otherArr[1]</strong></td>
					<td>
						<strong>a</strong>: <input style="width: 25%;" data-bind="value: personal.otherArr.1.a">
						<strong>b</strong>: <input style="width: 25%;" data-bind="value: personal.otherArr.1.b">
					</td>
				</tr>
			</table>
		</div>
		
		<div class="column">
			&nbsp;
		</div>
		
		<div class="column">
			<h3>Display{{#if _3w_id}} - {{_3w_id}}{{/if}}</h3>
			
			<table class="ui celled table">
				<tr>
					<td><strong>Name</strong></td>
					<td><span data-bind="html: name"></span></td>
				</tr>
				<tr>
					<td><strong>e-mail Preferences (bold if more than one)</strong></td>
					<td><span data-bind="html: emailPrefs|mapToEmailPrefs|boldIfMoreThanOne"></span></td>
				</tr>
				<tr>
					<td><strong>Age</strong></td>
					<td><span data-bind="html: personal.particulars.age|mapToAgeDisplay"></span></td>
				</tr>
				<tr>
					<td><strong>Notes</strong></td>
					<td><span data-bind="html: notes"></span></td>
				</tr>
				<tr>
					<td><strong>Tags</strong></td>
					<td><span data-bind="html: tags|tagsTextDisplay"></span></td>
				</tr>
				<tr>
					<td><strong>personal.someArr</strong></td>
					<td>
						<ol start="0">
							{{#each range 3}}
								<li><span data-bind="html: personal.someArr.{{this}}"></span></li>
							{{/each}}
						</ol>
					</td>
				</tr>
				<tr>
					<td><strong>personal.otherArr</strong></td>
					<td>
						<ol start="0">
							{{#each range 2}}
								<li>
									<ul>
										<li>
											a: <span data-bind="html: personal.otherArr.{{this}}.a"></span>&nbsp;&nbsp;
										</li>
										<li>
											b: <span data-bind="html: personal.otherArr.{{this}}.b"></span>
										</li>
									</ul>
									<br/>
								</li>
							{{/each}}
						</ol>
					</td>
				</tr>
			</table>
		</div>
		
	</div>
	
	<div class="column">
		&nbsp;
	</div>
	
	<div class="column">
		<h3>Hide?</h3>
		<data field="hide" initial-value="view model to view only"></data>
		<div>
			hide (View Model Only): <input data-bind="value: hide">
		</div>
		<div>
			hide: <span data-bind="html: hide"></span>
		</div>
		
		<div style="background-color: red; width: 100%;" data-bind="visible: hide|sayHideToHide">
			<strong>Set <code>hide</code> to "hide" to Make this Disappear </strong>
		</div>
		<div>
			<strong>The above is actually a <code>style.display</code> binding... Anything other than "hide" will show the annoying <span style="color: red;">red</span> <code>div</code>.</strong>
		</div>
	</div>
	
	<div class="column">
		&nbsp;
	</div>
	
	
</template>